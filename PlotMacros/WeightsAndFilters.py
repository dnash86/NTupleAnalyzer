from ROOT import *
import os
import sys
import math


Filters=""
#Filters = "*(passBeamScraping*passBadEESuperCrystal*passTrackingFailure*passPhysDeclared*passPrimaryVertex*passBeamHalo)"
#Filters += "*(passEcalDeadCellBE*passEcalDeadCellTP)"
#Filters += '*(passBENoiseFilter)'
#Filters += '*(passHcalLaserEvent*passBPTX0)'

LumiAndPU="*19600*weight_central"
#LumiAndPU = '*19600*weight*(((N_TruePileUpInteractions > -0.5)*(N_TruePileUpInteractions < 0.5)*(0.244530459598))+((N_TruePileUpInteractions > 0.5)*(N_TruePileUpInteractions < 1.5)*(0.31499229816))+((N_TruePileUpInteractions > 1.5)*(N_TruePileUpInteractions < 2.5)*(0.322198325491))+((N_TruePileUpInteractions > 2.5)*(N_TruePileUpInteractions < 3.5)*(0.341581979178))+((N_TruePileUpInteractions > 3.5)*(N_TruePileUpInteractions < 4.5)*(0.314648206273))+((N_TruePileUpInteractions > 4.5)*(N_TruePileUpInteractions < 5.5)*(0.56538981455))+((N_TruePileUpInteractions > 5.5)*(N_TruePileUpInteractions < 6.5)*(0.441769254091))+((N_TruePileUpInteractions > 6.5)*(N_TruePileUpInteractions < 7.5)*(0.427953902511))+((N_TruePileUpInteractions > 7.5)*(N_TruePileUpInteractions < 8.5)*(0.589749988768))+((N_TruePileUpInteractions > 8.5)*(N_TruePileUpInteractions < 9.5)*(0.90410918038))+((N_TruePileUpInteractions > 9.5)*(N_TruePileUpInteractions < 10.5)*(1.30791473807))+((N_TruePileUpInteractions > 10.5)*(N_TruePileUpInteractions < 11.5)*(1.67352362673))+((N_TruePileUpInteractions > 11.5)*(N_TruePileUpInteractions < 12.5)*(1.73749668906))+((N_TruePileUpInteractions > 12.5)*(N_TruePileUpInteractions < 13.5)*(1.55901911286))+((N_TruePileUpInteractions > 13.5)*(N_TruePileUpInteractions < 14.5)*(1.33294641224))+((N_TruePileUpInteractions > 14.5)*(N_TruePileUpInteractions < 15.5)*(1.16443495129))+((N_TruePileUpInteractions > 15.5)*(N_TruePileUpInteractions < 16.5)*(1.0778945916))+((N_TruePileUpInteractions > 16.5)*(N_TruePileUpInteractions < 17.5)*(1.05186609916))+((N_TruePileUpInteractions > 17.5)*(N_TruePileUpInteractions < 18.5)*(1.06930192555))+((N_TruePileUpInteractions > 18.5)*(N_TruePileUpInteractions < 19.5)*(1.11290406686))+((N_TruePileUpInteractions > 19.5)*(N_TruePileUpInteractions < 20.5)*(1.15374740394))+((N_TruePileUpInteractions > 20.5)*(N_TruePileUpInteractions < 21.5)*(1.17732035702))+((N_TruePileUpInteractions > 21.5)*(N_TruePileUpInteractions < 22.5)*(1.18611191193))+((N_TruePileUpInteractions > 22.5)*(N_TruePileUpInteractions < 23.5)*(1.18131632992))+((N_TruePileUpInteractions > 23.5)*(N_TruePileUpInteractions < 24.5)*(1.15759938709))+((N_TruePileUpInteractions > 24.5)*(N_TruePileUpInteractions < 25.5)*(1.11059879824))+((N_TruePileUpInteractions > 25.5)*(N_TruePileUpInteractions < 26.5)*(1.04068494668))+((N_TruePileUpInteractions > 26.5)*(N_TruePileUpInteractions < 27.5)*(0.951171301491))+((N_TruePileUpInteractions > 27.5)*(N_TruePileUpInteractions < 28.5)*(0.845167369924))+((N_TruePileUpInteractions > 28.5)*(N_TruePileUpInteractions < 29.5)*(0.727643057296))+((N_TruePileUpInteractions > 29.5)*(N_TruePileUpInteractions < 30.5)*(0.606056240769))+((N_TruePileUpInteractions > 30.5)*(N_TruePileUpInteractions < 31.5)*(0.488283455463))+((N_TruePileUpInteractions > 31.5)*(N_TruePileUpInteractions < 32.5)*(0.380046057388))+((N_TruePileUpInteractions > 32.5)*(N_TruePileUpInteractions < 33.5)*(0.285250787571))+((N_TruePileUpInteractions > 33.5)*(N_TruePileUpInteractions < 34.5)*(0.205823501565))+((N_TruePileUpInteractions > 34.5)*(N_TruePileUpInteractions < 35.5)*(0.142231316023))+((N_TruePileUpInteractions > 35.5)*(N_TruePileUpInteractions < 36.5)*(0.0941677929934))+((N_TruePileUpInteractions > 36.5)*(N_TruePileUpInteractions < 37.5)*(0.0599116312817))+((N_TruePileUpInteractions > 37.5)*(N_TruePileUpInteractions < 38.5)*(0.0367993896252))+((N_TruePileUpInteractions > 38.5)*(N_TruePileUpInteractions < 39.5)*(0.0220068531564))+((N_TruePileUpInteractions > 39.5)*(N_TruePileUpInteractions < 40.5)*(0.0129486820498))+((N_TruePileUpInteractions > 40.5)*(N_TruePileUpInteractions < 41.5)*(0.00759458681023))+((N_TruePileUpInteractions > 41.5)*(N_TruePileUpInteractions < 42.5)*(0.00450930103869))+((N_TruePileUpInteractions > 42.5)*(N_TruePileUpInteractions < 43.5)*(0.00275675132524))+((N_TruePileUpInteractions > 43.5)*(N_TruePileUpInteractions < 44.5)*(0.0017663818592))+((N_TruePileUpInteractions > 44.5)*(N_TruePileUpInteractions < 45.5)*(0.00119894122355))+((N_TruePileUpInteractions > 45.5)*(N_TruePileUpInteractions < 46.5)*(0.000864708996439))+((N_TruePileUpInteractions > 46.5)*(N_TruePileUpInteractions < 47.5)*(0.000659651697587))+((N_TruePileUpInteractions > 47.5)*(N_TruePileUpInteractions < 48.5)*(0.000527010924453))+((N_TruePileUpInteractions > 48.5)*(N_TruePileUpInteractions < 49.5)*(0.000436191386691))+((N_TruePileUpInteractions > 49.5)*(N_TruePileUpInteractions < 50.5)*(0.000370765362639))+((N_TruePileUpInteractions > 50.5)*(N_TruePileUpInteractions < 51.5)*(0.000321223237915))+((N_TruePileUpInteractions > 51.5)*(N_TruePileUpInteractions < 52.5)*(0.000282300996348))+((N_TruePileUpInteractions > 52.5)*(N_TruePileUpInteractions < 53.5)*(0.000250586295532))+((N_TruePileUpInteractions > 53.5)*(N_TruePileUpInteractions < 54.5)*(0.000223641464536))+((N_TruePileUpInteractions > 54.5)*(N_TruePileUpInteractions < 55.5)*(0.000200125931199))+((N_TruePileUpInteractions > 55.5)*(N_TruePileUpInteractions < 56.5)*(0.000179054157397))+((N_TruePileUpInteractions > 56.5)*(N_TruePileUpInteractions < 57.5)*(0.000159835686271))+((N_TruePileUpInteractions > 57.5)*(N_TruePileUpInteractions < 58.5)*(0.000142026696041))+((N_TruePileUpInteractions > 58.5)*(N_TruePileUpInteractions < 59.5)*(0.000263820856266)))'



LumiAndPUDown = '*19600*weight*(((N_PileUpInteractions > -0.5)*(N_PileUpInteractions < 0.5)*(0.26456656605))+((N_PileUpInteractions > 0.5)*(N_PileUpInteractions < 1.5)*(0.454327147613))+((N_PileUpInteractions > 1.5)*(N_PileUpInteractions < 2.5)*(0.393716480148))+((N_PileUpInteractions > 2.5)*(N_PileUpInteractions < 3.5)*(0.461433749041))+((N_PileUpInteractions > 3.5)*(N_PileUpInteractions < 4.5)*(0.422685981582))+((N_PileUpInteractions > 4.5)*(N_PileUpInteractions < 5.5)*(1.2456471553))+((N_PileUpInteractions > 5.5)*(N_PileUpInteractions < 6.5)*(0.778623370495))+((N_PileUpInteractions > 6.5)*(N_PileUpInteractions < 7.5)*(0.700164587042))+((N_PileUpInteractions > 7.5)*(N_PileUpInteractions < 8.5)*(0.942864686217))+((N_PileUpInteractions > 8.5)*(N_PileUpInteractions < 9.5)*(1.37339649154))+((N_PileUpInteractions > 9.5)*(N_PileUpInteractions < 10.5)*(1.91076993454))+((N_PileUpInteractions > 10.5)*(N_PileUpInteractions < 11.5)*(2.19274760029))+((N_PileUpInteractions > 11.5)*(N_PileUpInteractions < 12.5)*(2.06145002656))+((N_PileUpInteractions > 12.5)*(N_PileUpInteractions < 13.5)*(1.77496291273))+((N_PileUpInteractions > 13.5)*(N_PileUpInteractions < 14.5)*(1.49112553371))+((N_PileUpInteractions > 14.5)*(N_PileUpInteractions < 15.5)*(1.27578151029))+((N_PileUpInteractions > 15.5)*(N_PileUpInteractions < 16.5)*(1.15654494555))+((N_PileUpInteractions > 16.5)*(N_PileUpInteractions < 17.5)*(1.11276684547))+((N_PileUpInteractions > 17.5)*(N_PileUpInteractions < 18.5)*(1.11764073435))+((N_PileUpInteractions > 18.5)*(N_PileUpInteractions < 19.5)*(1.14934244581))+((N_PileUpInteractions > 19.5)*(N_PileUpInteractions < 20.5)*(1.17873893829))+((N_PileUpInteractions > 20.5)*(N_PileUpInteractions < 21.5)*(1.18821652561))+((N_PileUpInteractions > 21.5)*(N_PileUpInteractions < 22.5)*(1.17120215783))+((N_PileUpInteractions > 22.5)*(N_PileUpInteractions < 23.5)*(1.12253723334))+((N_PileUpInteractions > 23.5)*(N_PileUpInteractions < 24.5)*(1.04200126633))+((N_PileUpInteractions > 24.5)*(N_PileUpInteractions < 25.5)*(0.936807993195))+((N_PileUpInteractions > 25.5)*(N_PileUpInteractions < 26.5)*(0.814976466364))+((N_PileUpInteractions > 26.5)*(N_PileUpInteractions < 27.5)*(0.683788975723))+((N_PileUpInteractions > 27.5)*(N_PileUpInteractions < 28.5)*(0.551759274007))+((N_PileUpInteractions > 28.5)*(N_PileUpInteractions < 29.5)*(0.428149652838))+((N_PileUpInteractions > 29.5)*(N_PileUpInteractions < 30.5)*(0.319379248277))+((N_PileUpInteractions > 30.5)*(N_PileUpInteractions < 31.5)*(0.228382352862))+((N_PileUpInteractions > 31.5)*(N_PileUpInteractions < 32.5)*(0.155816735218))+((N_PileUpInteractions > 32.5)*(N_PileUpInteractions < 33.5)*(0.10119016416))+((N_PileUpInteractions > 33.5)*(N_PileUpInteractions < 34.5)*(0.0625699050974))+((N_PileUpInteractions > 34.5)*(N_PileUpInteractions < 35.5)*(0.036932653395))+((N_PileUpInteractions > 35.5)*(N_PileUpInteractions < 36.5)*(0.020980065441))+((N_PileUpInteractions > 36.5)*(N_PileUpInteractions < 37.5)*(0.0115966089979))+((N_PileUpInteractions > 37.5)*(N_PileUpInteractions < 38.5)*(0.00631772386359))+((N_PileUpInteractions > 38.5)*(N_PileUpInteractions < 39.5)*(0.00345164277296))+((N_PileUpInteractions > 39.5)*(N_PileUpInteractions < 40.5)*(0.00192947078169))+((N_PileUpInteractions > 40.5)*(N_PileUpInteractions < 41.5)*(0.00112696698959))+((N_PileUpInteractions > 41.5)*(N_PileUpInteractions < 42.5)*(0.000699427684907))+((N_PileUpInteractions > 42.5)*(N_PileUpInteractions < 43.5)*(0.000464456140739))+((N_PileUpInteractions > 43.5)*(N_PileUpInteractions < 44.5)*(0.00032914816742))+((N_PileUpInteractions > 44.5)*(N_PileUpInteractions < 45.5)*(0.00024595923984))+((N_PileUpInteractions > 45.5)*(N_PileUpInteractions < 46.5)*(0.000191322960554))+((N_PileUpInteractions > 46.5)*(N_PileUpInteractions < 47.5)*(0.000153307449281))+((N_PileUpInteractions > 47.5)*(N_PileUpInteractions < 48.5)*(0.000125470097055))+((N_PileUpInteractions > 48.5)*(N_PileUpInteractions < 49.5)*(0.000104169082978))+((N_PileUpInteractions > 49.5)*(N_PileUpInteractions < 50.5)*(8.72918041813e-05))+((N_PileUpInteractions > 50.5)*(N_PileUpInteractions < 51.5)*(7.34616636317e-05))+((N_PileUpInteractions > 51.5)*(N_PileUpInteractions < 52.5)*(6.18922657068e-05))+((N_PileUpInteractions > 52.5)*(N_PileUpInteractions < 53.5)*(5.2049512174e-05))+((N_PileUpInteractions > 53.5)*(N_PileUpInteractions < 54.5)*(4.35482836121e-05))+((N_PileUpInteractions > 54.5)*(N_PileUpInteractions < 55.5)*(3.6197621499e-05))+((N_PileUpInteractions > 55.5)*(N_PileUpInteractions < 56.5)*(2.98458257578e-05))+((N_PileUpInteractions > 56.5)*(N_PileUpInteractions < 57.5)*(2.43882354189e-05))+((N_PileUpInteractions > 57.5)*(N_PileUpInteractions < 58.5)*(1.97249946473e-05))+((N_PileUpInteractions > 58.5)*(N_PileUpInteractions < 59.5)*(3.3188970003e-05)))'


LumiAndPUUp = '*19600*weight*(((N_PileUpInteractions > -0.5)*(N_PileUpInteractions < 0.5)*(0.227273613972))+((N_PileUpInteractions > 0.5)*(N_PileUpInteractions < 1.5)*(0.207181975298))+((N_PileUpInteractions > 1.5)*(N_PileUpInteractions < 2.5)*(0.284196527172))+((N_PileUpInteractions > 2.5)*(N_PileUpInteractions < 3.5)*(0.247869221682))+((N_PileUpInteractions > 3.5)*(N_PileUpInteractions < 4.5)*(0.27523434936))+((N_PileUpInteractions > 4.5)*(N_PileUpInteractions < 5.5)*(0.264357086417))+((N_PileUpInteractions > 5.5)*(N_PileUpInteractions < 6.5)*(0.239599722555))+((N_PileUpInteractions > 6.5)*(N_PileUpInteractions < 7.5)*(0.266546378469))+((N_PileUpInteractions > 7.5)*(N_PileUpInteractions < 8.5)*(0.37225204099))+((N_PileUpInteractions > 8.5)*(N_PileUpInteractions < 9.5)*(0.595732119674))+((N_PileUpInteractions > 9.5)*(N_PileUpInteractions < 10.5)*(0.890441321723))+((N_PileUpInteractions > 10.5)*(N_PileUpInteractions < 11.5)*(1.20315287707))+((N_PileUpInteractions > 11.5)*(N_PileUpInteractions < 12.5)*(1.38838042304))+((N_PileUpInteractions > 12.5)*(N_PileUpInteractions < 13.5)*(1.34431237818))+((N_PileUpInteractions > 13.5)*(N_PileUpInteractions < 14.5)*(1.18319740661))+((N_PileUpInteractions > 14.5)*(N_PileUpInteractions < 15.5)*(1.04942589575))+((N_PileUpInteractions > 15.5)*(N_PileUpInteractions < 16.5)*(0.989852506555))+((N_PileUpInteractions > 16.5)*(N_PileUpInteractions < 17.5)*(0.984108479753))+((N_PileUpInteractions > 17.5)*(N_PileUpInteractions < 18.5)*(1.01321048366))+((N_PileUpInteractions > 18.5)*(N_PileUpInteractions < 19.5)*(1.06581525664))+((N_PileUpInteractions > 19.5)*(N_PileUpInteractions < 20.5)*(1.11691323583))+((N_PileUpInteractions > 20.5)*(N_PileUpInteractions < 21.5)*(1.15092035407))+((N_PileUpInteractions > 21.5)*(N_PileUpInteractions < 22.5)*(1.17092213937))+((N_PileUpInteractions > 22.5)*(N_PileUpInteractions < 23.5)*(1.18426700634))+((N_PileUpInteractions > 23.5)*(N_PileUpInteractions < 24.5)*(1.19321819239))+((N_PileUpInteractions > 24.5)*(N_PileUpInteractions < 25.5)*(1.19413986041))+((N_PileUpInteractions > 25.5)*(N_PileUpInteractions < 26.5)*(1.18016650208))+((N_PileUpInteractions > 26.5)*(N_PileUpInteractions < 27.5)*(1.14651493084))+((N_PileUpInteractions > 27.5)*(N_PileUpInteractions < 28.5)*(1.091907151))+((N_PileUpInteractions > 28.5)*(N_PileUpInteractions < 29.5)*(1.01750521583))+((N_PileUpInteractions > 29.5)*(N_PileUpInteractions < 30.5)*(0.925029519907))+((N_PileUpInteractions > 30.5)*(N_PileUpInteractions < 31.5)*(0.818117379331))+((N_PileUpInteractions > 31.5)*(N_PileUpInteractions < 32.5)*(0.702772202192))+((N_PileUpInteractions > 32.5)*(N_PileUpInteractions < 33.5)*(0.586760063172))+((N_PileUpInteractions > 33.5)*(N_PileUpInteractions < 34.5)*(0.475978489155))+((N_PileUpInteractions > 34.5)*(N_PileUpInteractions < 35.5)*(0.373878293931))+((N_PileUpInteractions > 35.5)*(N_PileUpInteractions < 36.5)*(0.283747606517))+((N_PileUpInteractions > 36.5)*(N_PileUpInteractions < 37.5)*(0.207665709142))+((N_PileUpInteractions > 37.5)*(N_PileUpInteractions < 38.5)*(0.146360425709))+((N_PileUpInteractions > 38.5)*(N_PileUpInteractions < 39.5)*(0.0995485857146))+((N_PileUpInteractions > 39.5)*(N_PileUpInteractions < 40.5)*(0.0656144180746))+((N_PileUpInteractions > 40.5)*(N_PileUpInteractions < 41.5)*(0.0421740780566))+((N_PileUpInteractions > 41.5)*(N_PileUpInteractions < 42.5)*(0.0266479872494))+((N_PileUpInteractions > 42.5)*(N_PileUpInteractions < 43.5)*(0.0167122112996))+((N_PileUpInteractions > 43.5)*(N_PileUpInteractions < 44.5)*(0.0105420553135))+((N_PileUpInteractions > 44.5)*(N_PileUpInteractions < 45.5)*(0.00677656876332))+((N_PileUpInteractions > 45.5)*(N_PileUpInteractions < 46.5)*(0.00450428068288))+((N_PileUpInteractions > 46.5)*(N_PileUpInteractions < 47.5)*(0.0031372570351))+((N_PileUpInteractions > 47.5)*(N_PileUpInteractions < 48.5)*(0.002306904244))+((N_PileUpInteractions > 48.5)*(N_PileUpInteractions < 49.5)*(0.0017912037474))+((N_PileUpInteractions > 49.5)*(N_PileUpInteractions < 50.5)*(0.00146077042716))+((N_PileUpInteractions > 50.5)*(N_PileUpInteractions < 51.5)*(0.00123980021765))+((N_PileUpInteractions > 51.5)*(N_PileUpInteractions < 52.5)*(0.00108624403604))+((N_PileUpInteractions > 52.5)*(N_PileUpInteractions < 53.5)*(0.000975366710705))+((N_PileUpInteractions > 53.5)*(N_PileUpInteractions < 54.5)*(0.000891658817723))+((N_PileUpInteractions > 54.5)*(N_PileUpInteractions < 55.5)*(0.000826492647619))+((N_PileUpInteractions > 55.5)*(N_PileUpInteractions < 56.5)*(0.000773761415131))+((N_PileUpInteractions > 56.5)*(N_PileUpInteractions < 57.5)*(0.000729367337727))+((N_PileUpInteractions > 57.5)*(N_PileUpInteractions < 58.5)*(0.000689930691621))+((N_PileUpInteractions > 58.5)*(N_PileUpInteractions < 59.5)*(0.00137393722147)))'


#SingleMuTrigger = '*('
SingleMuTrigger = '*( 0.985*(abs(Eta_muon1)<=0.9) + 0.963*(abs(Eta_muon1)>0.9)*(abs(Eta_muon1)<=1.2) + 0.995*(abs(Eta_muon1)>1.2)*(abs(Eta_muon1)<=2.1) )'


#SingleMuTrigger += '+isData'
#SingleMuTrigger += ')'

#DoubleMuTrigger = '*('
DoubleMuTrigger =  '*(1.0-(( 1.0 - 0.985*(abs(Eta_muon1)<=0.9) - 0.963*(abs(Eta_muon1)>0.9)*(abs(Eta_muon1)<=1.2) - 0.995*(abs(Eta_muon1)>1.2)*(abs(Eta_muon1)<=2.1) )'
DoubleMuTrigger += '*( 1.0 - 0.985*(abs(Eta_muon2)<=0.9) - 0.963*(abs(Eta_muon2)>0.9)*(abs(Eta_muon2)<=1.2) - 0.995*(abs(Eta_muon2)>1.2)*(abs(Eta_muon2)<=2.1) )))'


SingleMuNonEmulatedTrigger=  '*( 0.93*(abs(Eta_muon1)<=0.9) + 0.83*(abs(Eta_muon1)>0.9)*(abs(Eta_muon1)<=1.2) + 0.80*(abs(Eta_muon1)>1.2)*(abs(Eta_muon1)<=2.1) )'

DoubleMuNonEmulatedTrigger =  '*(1.0-(( 1.0 - 0.93*(abs(Eta_muon1)<=0.9) - 0.83*(abs(Eta_muon1)>0.9)*(abs(Eta_muon1)<=1.2) - 0.80*(abs(Eta_muon1)>1.2)*(abs(Eta_muon1)<=2.1) )'
DoubleMuNonEmulatedTrigger += '*( 1.0 - 0.93*(abs(Eta_muon2)<=0.9) - 0.83*(abs(Eta_muon2)>0.9)*(abs(Eta_muon2)<=1.2) - 0.80*(abs(Eta_muon2)>1.2)*(abs(Eta_muon2)<=2.1) )))'


DoubleETrigger = '*0.996'

DoubleENonEmulatedTrigger = '*0.996'

R_mumu_over_mu = '*(2.0-1.0'+SingleMuNonEmulatedTrigger+')'

R_ee_over_mu = '*(1.0'
R_ee_over_mu += DoubleENonEmulatedTrigger
R_ee_over_mu += '/'
R_ee_over_mu += '(1.0'+SingleMuNonEmulatedTrigger+')'
R_ee_over_mu += ')'

#DoubleMuTrigger += '+isData'
#DoubleMuTrigger += ')'

#TestBool = '*('
#TestBool += '(1-isData)'
#TestBool += '+isData'
#TestBool += ')'

#TestBool = '*('
#TestBool += '(!isData)'
#TestBool += '+isData'
#TestBool += ')'
